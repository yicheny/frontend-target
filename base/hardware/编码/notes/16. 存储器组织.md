[TOC]

# 多位锁存器
首先回顾下D型电平触发器：

![D型触发器-Clock](https://pic.imgdb.cn/item/618ca3742ab3f51d91539257.jpg)

之前我们使用Q和Q反两个输出，本章我们仅使用一种输出——目的是保存1位。

基于此保存的目的，我们将输入和输出端重新命名，使名称和功能相符：

![D型触发器-1位存储器](https://pic.imgdb.cn/item/61ebf88c2ab3f51d911f0a0b.jpg)

- 现在时钟端我们称之为 写操作端【Write】
- 数据端我们叫做 数据输入端【Data In】
- Q输出被叫做 数据输出端【Data Out】
- 使用电路记录信息叫做 写入【Written Into】 或 存储【Stored】 到电路中

> 这种类型的电路也被叫做锁存器，因为存储进去的数据好像被锁住一样。

1位锁存器示意图：

![1位锁存器](https://pic.imgdb.cn/item/61ebfa372ab3f51d9120cfb4.jpg)

实现多位锁存器很简单，就是将写操作端的信号连接到系统中【使用1个输入控制多个锁存器的写操作端】，如下图：

![多位锁存器-电路](https://pic.imgdb.cn/item/61ebfb502ab3f51d912211ae.jpg![img.png](img.png))

同样，我们以框图形式表现多位锁存器：

![多位锁存器-框图](https://pic.imgdb.cn/item/61ebfb782ab3f51d91223a28.jpg)

为了方便表示，我们也可以使用简写图：

![多位锁存器-简写图](https://pic.imgdb.cn/item/61ebfbfb2ab3f51d9122c480.jpg)

## 另一种集成多位锁存器的方式
在某些场景下，我们会使用另一种方式集成多位寄存器，它的结构不像上面那么简单，但是可以满足一些上面不能满足的需求。

需求：
1. 我们只想用一个数据输入和输出信号端
2. 希望锁存器能将输入信号数据分8次独立存储
3. 这个任务可以在长达1天内完成，也可能在下一秒搞定
4. 最后我们希望可以通过 观察数据输出信号端 确定实际的8位输出

简而言之：在这种锁存器里我们只想存储8个单独的比特，而不是1个8位二进制数【就是说，我们不需要一次展示所有比特，而是可以按顺序输出8位比特】

为什么会出现这种需求？

原因在于只有一个灯泡【输出】！

分析下现在的情况：存储8个比特，肯定需要8个1位存储器，先不考虑数据如何存储。关键在于：如何用一个灯泡来确定锁存器的数据输出信号，我们必须先确定预期的效果。

最简单粗暴的方式就是依次将灯泡连接在每个锁存器上，分若干次记录各个锁存器的输出。

不过这个方式想一想也能感受到麻烦：
1. 需要重复性的进行电路连接操作
2. 需要重复性的进行测试输出

我们追求更加自动化的方法。

进一步，我们首先解决第一个问题：重复性的电路连接，使用开关我们可以避免重复连接。

即：我们使用开关来决定测试哪一个寄存器。

最直接的想法是对每个锁存器使用一个开关，不过这不是一个好主意，我们并不需要使用这么多开关，太多的开关反而使得出错的可能增加【比如多个开关同时连接可能造成异常】

将这个问题进一步抽象，现在的问题是：怎么从8个物体中选择一个我们想要的？

实际上，我们只需要3个开关就可以实现对8个锁存器的选择，因为3bit可以表示`2^3=8`种情况。

目前我们准备的工具：
1. 8个1位锁存器
2. 3个开关
3. 1个灯泡

我们预期的效果：

![测试器-预期](https://pic.imgdb.cn/item/61ed4f732ab3f51d9152d2f5.jpg)

现在的关键是：我们怎么实现这个选择器？

在第十四章我们实现过一个`2-1`选择器，在手动输入和锁存器输入中进行选择，我们现在需要实现的是`8-1`选择器：

![8-1选择](https://pic.imgdb.cn/item/61edf8dd2ab3f51d91dc87ff.jpg)

`8-1`选择器有8个数据输入，3个选择输入，根据选择输入我们决定选择使用哪个数据输入。

| 选择输入       | 测试的数据输入 | 
|------------|---------|
| 0,0,0      | D0      | 
| 0,0,1 | D1 |
| 0,1,0 | D2 |
| 0,1,1 | D3 |
| 1,0,0 | D4 |
| 1,0,1 | D5 |
| 1,1,0 | D6 |
| 1,1,1 | D7 |

`8-1`选择器电路实现如下：

![`8-1`选择器电路](https://pic.imgdb.cn/item/61edfa832ab3f51d91dd9ed9.jpg)