[TOC]

# 振荡器
我们来看一段电路：

![](https://pic.imgdb.cn/item/61892b822ab3f51d91af7b88.jpg)

这个电路乍看之下有些怪，通常我们见到的继电器，输入和输出是分开的，而这里却构成了回路。

我们将开关闭合，电路连通：

![](https://pic.imgdb.cn/item/61892c132ab3f51d91afe7f4.jpg)

电路连通，电磁铁获得磁性，将金属簧片拉下：

![](https://pic.imgdb.cn/item/61892c562ab3f51d91b0162f.jpg)

金属片拉下，电路不再连通，电磁铁不再具有次磁性，金属片弹回原位：

![](https://pic.imgdb.cn/item/61892c132ab3f51d91afe7f4.jpg)

这样，电路又一次连通了，又回到初始的情况。

这个电路可以简化成如下符号符号表示：

![](https://pic.imgdb.cn/item/61892d492ab3f51d91b0c997.jpg)

开关也可以省去：

![](https://pic.imgdb.cn/item/61892d772ab3f51d91b0eb4f.jpg)

这幅图看起来很矛盾：
1. 输入和输出相反
1. 输出即输出！

但是我们回到电路底层，这一切就变的可以理解了。

首先这里信息变换是使用反向器实现的，我们知道反向器本质上是继电器，继电器信号变换是需要一点点时间的，所以这里输入和其相反的输出信号不是同步得到的，变化是**需要时间的**。

也正是因此，才能做到信号持续的反复变化。

电路的输出是什么？是提供电压，或不提供。我们可以使用另一种方式描述这种情况，用0、1表示有无电压。

这种电路我们称为振荡器（信号会自动循环交替）

振荡器和我们之前所学的东西存在本质区别：之前的所有电路，其状态的改变都依靠人为干预，通常是通过改变开关状态实现的，而振荡器却在不需要人干涉的情况下进行改变

> 继电器的意义：是使用电流而非人为控制的开关。

实际上，振荡器是继电器的一个特殊使用场景，使用振荡器我们可以实现自动控制系统（在之后的章节中）

我们使用0、1表示振荡器输入，用图形描述如下：

![](https://pic.imgdb.cn/item/618a3b622ab3f51d916b124a.jpg)

注意这幅图，随着时间变化，振荡器的输出在0、1之间按规律交替进行变化，因此振荡器又被称为**时钟**，通过振荡器进行计数是一种计时方式。

振荡器从某个初始状态开始，经过一段时间回到初始状态的这个间隔被定义为振荡器的一个**循环**，或者称为一个**周期**

![](https://pic.imgdb.cn/item/618a3c062ab3f51d916c19e4.jpg)

一个循环所占用的时间就是该震荡的周期，周期的倒数是**频率**。

假设某个振荡器周期是`0.05s`，那么频率就是`1/0.05=20`，即每秒的循环次数

频率的单位是`Hz`，来源于发送和接收无线电波的第一人——【亨利希-鲁道夫-赫兹】，表示每秒循环次数。

如果我们说这个振荡器的频率是20Hz，就是说这个振荡器状态交替每秒循环20次

# 可以记住输入的电路
我们先看下或非门运算表：

> 可以通过 1-(A*B) 快速算出结果

| NOR | 0 | 1 | 
| -- | -- | -- | 
| 0 | 1 | 0 |
| 1 | 0 | 0 | 

从表里我们知道，只有两个输入端都没有电压时，输出端才产生电压。

我们来看一个特别的电路：

![](https://pic.imgdb.cn/item/618a40862ab3f51d91731518.jpg)

这个电路特殊在回环的导线，因为这个连线，两个或非门的输出互为输入，这种连接方式我们称为**反馈**

初始状态下：
1. 左侧或非门，输入为0、0，输出1
2. 右侧或非门，输入为0、1，输出0 => 灯泡熄灭

我们将上面的开关闭合，效果如下：

![](https://pic.imgdb.cn/item/618a41a62ab3f51d9174d5ae.jpg)

此时状态：
1. 左侧或非门，输入为0、1，输出0
2. 右侧或门非，输入为0、0，输出1 => 灯泡亮

接下来，我们断开上面的开关，可以发现灯泡依旧闪亮

![](https://pic.imgdb.cn/item/618a42082ab3f51d91756ae3.jpg)

分析下此时状态：
1. 左侧输入为1、0，输出0 
2. 右侧输入为0、0，输出1 => 灯泡亮

原因是因为右侧输出为1，而右侧输出为左侧输入，所以左侧输出必为0。

这里是不是很奇怪？现在的开关状态和初始状态是一致的，为什么灯泡状态不同？

让我们继续实验。

我们将下面的开关闭合：

![](https://pic.imgdb.cn/item/618a43452ab3f51d91773f83.jpg)

分析下此时状态：
1. 左侧输入1、0，输出0
2. 右侧输入0、1，输出0 => 灯泡灭

我们再断开下面的开关：

![](https://pic.imgdb.cn/item/618a40862ab3f51d91731518.jpg)

可以发现这个时候灯泡和初始状态一样熄灭了。

分析此时状态：
1. 左侧输入0、0，输出1
2. 右侧输入1、0，输入0 => 灯泡灭

这个电路特殊在：同样是两个开关断开的情况下，灯泡有时亮有时不亮。

这种具有两种稳定态的电路，被统称为**触发器**

我们可以通过灯泡的状态知道上一次闭合的开关是哪一个，灯泡亮，则上一次闭合的是上面的开关；灯泡熄灭，则上一次闭合的是下面的开关

这一点很重要，这意味着这个电路可以**记住**上一次的输入【准确的说是可以根据当前输出推导出上一次的输入】

在此之前，电路的状态只有“现在”，只有“现在”的电路无法抵达“未来”。

所谓“记忆”，是已发生事物的集合，发生在“过去”，我们通过“过去”递推至“现在”，只有“现在”我们无法递推至“未来”。

举一个例子，假设我们在数数，如果我们不记得上一次数的数，我们怎么知道这一次数到多少？又怎么知道下一次应该数多少？

人类将记住的事情称之为“记忆”，现在，我们将电路记住的事物称之为“数据”。

数据特性：
- 数据可以作为输入，但数据并不是输入【输入并不一定需要“记住”】
- 数据可变，但是如果我们不主动更新数据，它就是稳定不变的

## `R-S`触发器
触发器有很多，刚刚所说的是最简单的一种，叫做`R-S`（Reset-Set 复位/置位）触发器

我们可以用如下方式简写：

![](https://pic.imgdb.cn/item/618be3562ab3f51d91137479.jpg)

说明下符号的意义：
- `Q` 输出状态
- `Q反` 对`Q`的取反
- `R` 复位，将`Q`设为`0` 【对应先前触发器的下面开关】
- `S` 置位，将`Q`设为`1` 【对应先前触发器的下面开关】

我们用表总结下：
> 这类表叫做功能表(function table)、逻辑表、真值表，用于表达不同输入组合对应的输出结果

| S | R | Q | Q反 | 
| -- | -- | -- | -- |
| 0 | 1 | 0 | 1 |
| 1 | 0 | 1 | 0 |
| 0 | 0 | Q | Q反 | 
| 1 | 1 | 禁止 | 禁止 |

特别说明下当`R`、`S`均为1的情况，可以看到表里我们写的是禁止，禁止的原因是当两者均为1时，`Q`和`Q反`输出均为0，这违反了我们一开始的定义。

设计`RS`触发器电路时，需要避免`R`、`S`同时为1。

`RS`触发器可以使用如下符号表示：

![](https://pic.imgdb.cn/item/618c64882ab3f51d913adf48.jpg)

## D型触发器
我们可以看到，`RS`触发器的能力是可以记住上一次哪一个输入为1，然而我们希望的是一种更强大的电路记忆能力：记住某个时间节点上的信号是0还是1

在真正设计这个电路之前，我们首先思考下它应该具备的能力（或者说它是通过什么形式进行记忆的】

1. 这个电路有两个输入端
2. 其中一个叫做数据端(Data)，用于输入信号
3. 另一个叫做保持位(Hold That Bit)，决定当前状态是否被“记忆”。通常状态保持位为0，此时数据端信号不会被记忆；保持位为1时，此时数据段信号会被记忆/保存到电路系统中。

真值表：

| 数据 | 保持位 | 输出 | 
| -- | -- | -- | 
| X | 1 | X | 
| X | 0 | Q |

我们只需要在`RS`触发器上加两个与门即可达成目的：

![](https://pic.imgdb.cn/item/618ca1292ab3f51d9152caeb.jpg)

我们只需要两个输入，而现在有三个输入。

复位和置位只需要一个输入【两者永远相反】，这样可以规避掉两者同时为1的情况，如图：

![](https://pic.imgdb.cn/item/618ca2832ab3f51d91534169.jpg)

这个电路就是`D`型触发器，我们可以看到这个电路是符合我们一开始的需求的：
1. 两个输入
1. 数据端用于信号输入
1. 保持位为0，则数据端信号不会被记忆，保持位为1，记忆数据端信号。

不过在书中出现时这种电路时，保持位通常被叫做时钟。有些情况下它具备当作时钟的性质，可以在0、1之间有规律的变化，不过在这里，我们仅仅用于标识是否进行数据存储。

![](https://pic.imgdb.cn/item/618ca3742ab3f51d91539257.jpg)

我们将数据端简写为`D`，时钟端简写为`Clk`，输出端简写为`Q`，更新功能表：
| D | Clk | Q | 
| -- | -- | -- | 
| X | 1 | X | 
| X | 0 | Q |

这个电路可以被叫做：
1. D型触发器
1. 电平触发的D型锁存器
1. 1位存储器

现在我们先不介绍如何将多个1位存储器连接构成多位存储器，在之后的章节会说明。

# 资料
- [wiki-触发器](https://zh.wikipedia.org/wiki/%E8%A7%A6%E5%8F%91%E5%99%A8)