[TOC]

# 程序
- 程式（program）：存放在硬件中的资料
- 程序（process）：程式触发后，系统分配程序内存即标识码（PID），内存有两部分内容：1.权限及相关属性 2.程序运行数据

什么是程序？

可以认为是被放到内存中执行的指令，指令没有被放到内存中执行时，只是资料。

另外需要的关注的时，即使是相同的代码被执行，程序也是不同的，因为根据使用者不同，程序的权限及相关配置可能是不同的。这里尤为重要的是权限，然后一般情况下，程序启动的子程序会沿用当前程序权限。

## 子程序和父程序
linux中没有直接的线程和进程概念，所有执行实体都叫做“任务”（Task）

通过以下方式可以创建新任务：
- `fork` 创建任务的可执行镜像
- `clone` 创建新任务

使用`fork`创建新任务会非常快，因为`fork`通过“写时复制”共享原任务的内存空间。

值得注意的是：镜像任务不能再次进行`fork`，只有“实体”任务可以进行`fork`

`clone`则是复制了一份原任务的内存空间，所以速度会慢得多。【`clone`也可以选择共享原任务内存】

![](https://pic.imgdb.cn/item/61f20f8b2ab3f51d915ffe9b.jpg)

简单来理解就是，任务A呼叫出任务B，则A是B的父程序，B是A的子程序。

子程序和父程序的PID不同，并且子程序会有一个记录父程序PID的PPID

```shell
[root@localhost cTest]# ps -l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0   3938   3927  0  80   0 - 29080 do_wai pts/0    00:00:00 bash
0 R     0  16752   3938  0  80   0 - 38331 -      pts/0    00:00:00 ps
[root@localhost cTest]# bash
[root@localhost cTest]# ps -l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0   3938   3927  0  80   0 - 29080 do_wai pts/0    00:00:00 bash
4 S     0  16759   3938  0  80   0 - 29082 do_wai pts/0    00:00:00 bash # 注意这一行
0 R     0  16793  16759  0  80   0 - 38331 -      pts/0    00:00:00 ps
```

## 服务
常驻在内存中的程序叫做服务。（一般程序执行完了就会立刻结束，比如ls、touch、cp这些）

## 多人多工
linux的工作模式是多人多工，就是支持多个用户多个程序进行工作。

默认支持tty1-tty7七个基本终端，这种模式的好处就是当一个程序卡死了，可以切换到其他终端干掉卡死的程序，保证系统的稳定

另外，一个用户也是可以开启多个程序工作的，比如：
```shell
cp file1 file2 & #加上这个&之后，程序就在后台运行了，执行成功后系统会在终端显示完成
```
